<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="../../static/components/easyui/themes/default/easyui.css"/>
<link rel="stylesheet" type="text/css" href="../../static/components/easyui/themes/icon.css"/>
<link rel="stylesheet" type="text/css" href="../../static/css/style.css"/>

<script type="text/javascript" src="../../static/js/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="../../static/components/easyui/jquery.easyui.min.js"></script>
<script type="text/javascript" src="../../static/components/easyui/locale/easyui-lang-zh_CN.js"></script>
<script type="text/javascript" src="../../static/js/default.js"></script>
<title>订单管理</title>
</head>
<body class="easyui-layout">
	<div data-options="region:'north'" class="searchArea">
    	<form id="searchForm">
        	<span>店名：</span><input class="easyui-textbox" type="text" name="shopName"/>
            <span>所属地区：</span><input class="easyui-textbox" type="text" name="areaName"/>
            <a href="javascript:search();" class="easyui-linkbutton" data-options="iconCls:'icon-search'">查询</a><!--连js都懒得写了-->
            <a href="javascript:export();" class="easyui-linkbutton" data-options="iconCls:'icon-save'">导出</a>
        </form>
    </div>
    <div data-options="region:'center'">
    	<table id="shopList" style="width:700px;height:800px"></table>
    </div>
    <!--隐藏部分-->
    <div id="w" class="easyui-window" data-options="iconCls:'icon-save'" style="width:310px;height:280px;padding:10px;">
    	<form id="form" method="post">
        	<table border="0">
              <tr>
                <td class="textRight">
	                <label for="shopName">店名:</label>
                </td>
                <td>
                	<input class="easyui-textbox" type="text" name="shopName" id="shopName" data-options="required:true" 
                validateOnCreate="false" validateOnBlur="true" missingMessage="请输入店名"/>
                <input type="hidden" name="shopSeq" id="shopSeq"/><!--没有label就用自己的名字做字段名-->
                </td>
              </tr>
              <tr>
                <td class="textRight">
                	<label for="areaSeq">所属地区:</label>
                </td>
                <td><!--重视id的作用-->
                	<select name="position" id="areaSeq" class="easyui-combobox" style="width:125px;"
                	data-options="required:true" validateOnCreate="false" validateOnBlur="true" missingMessage="请选择地区"
                	validType:'selectNeed[\'#areaSeq\']'>
                		<!--没有代表需要动态获取-->
                	</select>
                </td>
              </tr>
              <tr>
                <td class="textRight">
                	<label for="telephone">联系电话:</label>
                </td>
                <td>
                	<input class="easyui-textbox" type="text" name="telephone" id="telephone" data-options="required:true" 
                validateOnCreate="false" validateOnBlur="true" missingMessage="请输入联系电话"/>
                </td>
              </tr>
              <tr>
                <td class="textRight">
                	<label for="areaSeq">详细地址:</label>
                </td>
                <td>
                	<input class="easyui-textbox" type="text" name="address" id="address" data-options="required:true,multiline:true,height:70" 
                validateOnCreate="false" validateOnBlur="true" missingMessage="请输入详细地址"/>
                </td>
              </tr>              
              <tr>
              	<td colspan="2" align="center">
                	<a id="btn" href="javascript:$('#form').submit();" class="easyui-linkbutton" data-options="iconCls:'icon-save'">保存</a>
                    <a id="btn" href="javascript:closeWindow('w');" class="easyui-linkbutton" data-options="iconCls:'icon-remove'">取消</a>
                 </td>
              </tr>
            </table>
        </form>  

    </div>
</body>
<script type="text/javascript">
		$(function(){
			//窗口
			$('#w').window('close');
			//提交
			$('#form').form('submit', {
			    onSubmit: function(){    
			        
			    },    
			    success:function(data){    
			    	$('#shopList').datagrid('reload');//根节点
			    }    
			});  

			//列表
			$('#shopList').datagrid({    
					fit: true,
					nowrap: false, 
					autoRowHeight: true,
					animate:true,
					scrollbarSize: 0,
					striped: true,
					collapsible:true,
					singleSelect:false,
					rownumbers:true,
					idField:'shopSeq',
					treeField:'shopName',
					pagination:true,
					pageList: [10,20,40,80,160],
					columns:[[
						{field:'ck', checkbox: true},
						{field:'shopSeq', hidden:true},
						{field:'shopName',title:'店名',width:'200'},
						{title:'所属地区',field:'areaName',width:'100'},
						{title:'详细地址',field:'address',width:'300',
							formatter: function(value,row,index){
								//点击弹框百度地图
								return value;
							}
						},
						{title:'店长',field:'staffName',width:'100',
							formatter: function(value,row,index){
								//点击弹框店长信息
								return value;
							}
						},
						{title:'联系电话',field:'telephone',width:'150'}
					]],
					data:{
    "total":5,
    "rows":[
        {
            "shopName":"郎奇空调专卖店",
            "address":"福华路399号中海大厦一楼",
            "areaName":"福田区",
            "shopSeq":"e9d41307ac7341f0b1f45f467d8bfc95",
            "areaSeq":"0addd5bed4734a87b346a7df47452a3b",
            "staffName":"黄福华",
            "telephone":"0755-122356446",
            "staffSeq":"0d11de1d4487456d808596279d82f759"
        },
        {
            "shopName":"郎奇空调南山营业部",
            "address":"前海路0366号山水情商厦B2-8765号",
            "areaSeq":"a291cbd23c6942b1bd9b843b52f75066",
            "shopSeq":"cc46e27f91384eb6931eb3af90c5e8ee",
            "areaName":"南山区",
            "staffName":"周敏",
            "telephone":"0755-83657876",
            "staffSeq":"0a0e2c6b0cca41baa8456571f948fa82"
        },
        {
            "shopName":"克孜勒苏柯尔克孜郎奇空调专卖店",
            "address":"喀什市亚瓦格路10号",
            "areaName":"克孜勒苏柯尔克孜自治州",
            "areaSeq":"f9fff18ab3224d1f9f330effbc43842e",
            "shopSeq":"a16aaf5766e64638921228526898090b",
            "staffName":"王莉",
            "telephone":"0908-5211233477",
            "staffSeq":"bd8edd2a927448ce8941c2bf467fba92"
        },
        {
            "shopName":"郎奇空调",
            "address":"天山区健康路219号",
            "areaName":"乌鲁木齐市",
            "areaSeq":"cfdac1b3a2734626b604cf4edf97b1ef",
            "shopSeq":"17fe4dfe8d884362bd01f24224407592",
            "staffName":"古塔热力",
            "telephone":"0991-567845677",
            "staffSeq":"e582143ca579473fa8ca994665e42ad2"
        },
		{
            "shopName":"郎奇空调天猫旗舰店",
            "address":"https://www.tmall.com/?spm=a211oj.11498583.a2226mz.1.5589499axB3TzY",
            "areaName":"",
            "areaSeq":"",
            "shopSeq":"17fe4dfe8d884362bd01f24224407222",
            "staffName":"张维新",
            "telephone":"010-2231423445",
            "staffSeq":"e582143ca579473fa8ca994665e42222"
        }
    ]
},
					toolbar:[{
						id:'addShop',
						text:'添加店铺',
						iconCls:'icon-add',
						handler:function(){
							$('#w').window({"title":"添加店铺"});
							$('#w').window('open');
						}
					},{
						id:'editShop',
						text:'编辑店铺',
						iconCls:'icon-edit',
						handler:function(){
							var selected = $("#shopList").datagrid('getSelections');
							if(selected.length!=1){
								$.messager.alert("操作提示", "请选择一个店铺","warning");
								return;
							}else{
								selected = selected[0];
								$('#w').window({"title":"编辑店铺信息"});
								$("#shopSeq").val(selected.shopSeq);
								$("#shopName").textbox('setValue',selected.shopName);
								$("#areaSeq").combobox('setValue',selected.areaSeq);
								$("#address").textbox('setValue',selected.address);
								$("#telephone").textbox('setValue',selected.telephone);
								$('#w').window('open');
							}
						}
					},{
						id:'deleteShop',//重视id的作用
						text:'删除店铺',
						iconCls:'icon-remove',
						handler:function(){
							var selected = $("#shopList").datagrid('getSelections');
							if(selected.length<1){
								$.messager.alert("操作提示", "请选择店铺","warning");
								return;
							}else{
								var shopSeq = "";
								for(var i = 0;i < selected.length; i++){
									shopSeq += selected[i].shopSeq+",";
								}
								shopSeq = shopSeq.substring(0,shopSeq.length-1);
								$.messager.confirm('删除确认',shopName + "的管理员及子店铺都会被删除，确信要删除吗？",function(r){    
    								if (r){    
										
										$('#shopList').datagrid('reload');
    								}    
								});
							}
						}
					},{
						id:'giveStaffs',
						text:'员工管理',
						iconCls:'icon-add',
						handler:function(){
							/*业务语言
							弹框{
							分页查询本店铺的员工：工号，姓名，职位；
							多选；
							功能栏：【
							{添加员工，弹框选择{多选，分页查询非本店铺的员工：工号，姓名，职位}}，
							{删除员工，从列表删除选中的员工}
							】						
							}
							*/
						}
					}]
				});
			
		});
	</script>
</html>
